#pragma once
#include "Config.h"

typedef enum {
	ACT_NONE,
	ACT_IGNORE,
	ACT_LAN_STATUS,
	ACT_REGISTER,
	ACT_INIT_HU,
	ACT_INIT_HU1,
	ACT_INIT_SAT0,
	ACT_INIT_SAT1,
	ACT_INIT_SAT2,

	ACT_SAT_UP,
	ACT_SAT_DOWN,


	ACT_INIT_B0,
	ACT_INIT_B1,


	ACT_CmdSettingHU0,
	ACT_CmdSettingHU1,
	ACT_CmdSettingHU2,
	ACT_CmdSettingHU3,
	ACT_CmdSettingHU4,
	ACT_CmdSettingHU5,   //current station
	ACT_CmdSettingHU6,
	ACT_CmdSettingHU7,
	ACT_CmdSettingHU8,
	ACT_CmdSettingHU9,
	ACT_CmdSettingHU_FM,   //station table fm1
	ACT_CmdSettingHU_AM,   //station table am		
	ACT_CmdSettingHU_CHANGER,   //station table am		
	ACT_CmdSettingHU_SET_MODE,   //
	ACT_CmdSettingHU_SET_MODE_SAT,
	ACT_CmdSettingHU_MODE,   //
	MUTE,
	ACT_EXT,
	ACT_SWITCH

} IncomeActionID;

const InMaskedMessageTable  mtRegInMaskedMain[] PROGMEM = {
	{ ACT_REGISTER,     0x03,{ 0x10, 0, 0x01 }, _BV(1) },
};
const byte mtRegInMaskedMainSize = sizeof(mtRegInMaskedMain) / sizeof(InMaskedMessageTable);


const InMaskedMessageTable  mtMaskedMain[] PROGMEM = {
	{ ACT_CmdSettingHU_SET_MODE_SAT, 0x0C,{ 0x60, 0xC0, 0x00, 0x4F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x00 } ,_BV(7) },
	{ ACT_CmdSettingHU_SET_MODE_SAT, 0x0C,{ 0x60, 0xC0, 0x00, 0x06, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x00 } ,_BV(7) },
	{ ACT_CmdSettingHU_SET_MODE_SAT, 0x0C,{ 0x60, 0xC0, 0x00, 0x47, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x00 } ,_BV(7) },
};
const byte mtMaskedMainSize = sizeof(mtMaskedMain) / sizeof(InMaskedMessageTable);




/*
	< b 130 FFF E 20 00 11 01 09 07 07 02 06 0B 43 83 84 C0
	< b 130 FFF A 20 01 11 14 00 01 03 92 85 93
	< d 130 140 11 60 06 00 00 00 03 00 00 02 BB BB BB BB 87 9B 01 FF
	< d 130 140 F 20 02 11 05 05 00 01 02 01 06 01 0B 01 43 01
	*/
const InMessageTable  constInComeMessages[] PROGMEM = {
		//{ ACT_INIT_HU,		 0x11,{ 0x20, 0x02, 0x11, 0x06, 0x06, 0x00, 0x01, 0x02, 0x01, 0x06, 0x01, 0x0B, 0x01, 0x43, 0x01, 0x42, 0x01 }  },
		//{ ACT_INIT_HU,		 0x13,{ 0x20, 0x02, 0x11, 0x07, 0x07, 0x00, 0x01, 0x12, 0x01, 0x06, 0x01, 0x0B, 0x01, 0x43, 0x01, 0x22, 0x01, 0x42, 0x01 } },

		//{ ACT_INIT_HU,		 0xF, { 0x20, 0x02, 0x11, 0x05, 0x05, 0x00, 0x01, 0x02, 0x01, 0x07, 0x01, 0x1B, 0x01, 0x2B, 0x01 } },
		//{ ACT_INIT_HU,		 0x11,{ 0x20, 0x02, 0x11, 0x06, 0x06, 0x00, 0x01, 0x12, 0x01, 0x06, 0x01, 0x0B, 0x01, 0x43, 0x01, 0x22, 0x01}},
		//{ ACT_INIT_HU1,		 0xF, { 0x20, 0x02, 0x11, 0x05, 0x05, 0x00, 0x01, 0x02, 0x01, 0x06, 0x01, 0x0B, 0x01, 0x43, 0x01} },
		
		//{ ACT_INIT_B0,		 0xE, { 0x20, 0x00, 0x11, 0x01, 0x09, 0x07, 0x07, 0x02, 0x06, 0x0B, 0x43, 0x83, 0x84, 0xC0 } },      //BROADCAST  AVC LAN init !
		//{ ACT_INIT_B0,		 0xE, { 0x20, 0x00, 0x11, 0x01, 0x03, 0x07, 0x07, 0x02, 0x07, 0x1B, 0x2B, 0x83, 0x84, 0xC0 } },
		//{ ACT_INIT_B1,		 0xF, { 0x20, 0x01, 0x11, 0x14, 0x00, 0x01, 0x03, 0x92, 0x85, 0x93, 0x26, 0x00, 0x01, 0x01, 0x42 } },//BROADCAST  AVC LAN init !
		//{ ACT_INIT_B1,		 0xA, { 0x20, 0x01, 0x11, 0x14, 0x00, 0x01, 0x03, 0x92, 0x85, 0x93} },

		{ ACT_INIT_SAT0,     0x03,{ 0x40, 0x42, 0x10 } },  // LAN init   SAT
		{ ACT_INIT_SAT1,     0x03,{ 0x40, 0x42, 0x00 } },  // LAN init   SAT
		{ ACT_INIT_SAT2,     0x05,{ 0x30, 0x42, 0x02, 0x01, 0x00 } }, //init sat

		{ ACT_INIT_SAT2,     0x04,{ 0x40, 0x22, 0x01, 0x00 } },
		
 
};
const byte constInComeMessagesSize = sizeof(constInComeMessages) / sizeof(InMessageTable);


const InMessageTable  constInComeMessages2[] PROGMEM = {
	{ ACT_LAN_STATUS,    0x01,{ 0x1F } }, 
	{ ACT_SAT_UP,   0x08,{ 0x50, 0x02, 0x42, 0x42, 0x48, 0x00, 0x00 } },
	{ ACT_SAT_DOWN, 0x08,{ 0x50, 0x02, 0x42, 0x42, 0x32, 0x00, 0x00 } },
	{ ACT_IGNORE,   0x06,{ 0xD0, 0x32, 0x85, 0x00, 0x01, 0x01 } },
	{ ACT_IGNORE,   0x06,{ 0xD0, 0x32, 0x85, 0x00, 0x01, 0x00 } },
};
const byte constInComeMessages2Size = sizeof(constInComeMessages2) / sizeof(InMessageTable);



const InMessageIgnoreFromPosition  inMesagesIgnorePos[] PROGMEM = {
	 { ACT_INIT_B0,		 0xE, { 0x20, 0x00, 0x11, 0x01, 0x09, 0x07, 0x07, 0x02, 0x06, 0x0B, 0x43, 0x83, 0x84, 0xC0 },2 },      //BROADCAST  AVC LAN init
	 { ACT_INIT_B1,		 0xF, { 0x20, 0x01, 0x11, 0x14, 0x00, 0x01, 0x03, 0x92, 0x85, 0x93, 0x26, 0x00, 0x01, 0x01, 0x42 },2 },//BROADCAST  AVC LAN init
	 { ACT_INIT_HU,		 0x11,{ 0x20, 0x02, 0x11, 0x06, 0x06, 0x00, 0x01, 0x02, 0x01, 0x06, 0x01, 0x0B, 0x01, 0x43, 0x01, 0x42, 0x01 } , 2 }, 
};
const byte inMesagesIgnorePosSize = sizeof(inMesagesIgnorePos) / sizeof(InMessageIgnoreFromPosition);


const InMessageIgnoreFromPosition   inMesagesIgnorePosINIT[] PROGMEM = {

	//{ ACT_CmdSettingHU0,		 0x0A,{ 0x70, 0x02, 0x06, 0xD7, 0x00, 0x90, 0x00, 0x00, 0x37, 0x01 }, 3 },  								//CmdGetSettingHU0
	//{ ACT_CmdSettingHU1,		 0x0B,{ 0x70, 0x06, 0x26, 0x16, 0x00, 0x00, 0x00, 0x02, 0x06, 0x01, 0x03 }, 3 },							//CmdGetSettingHU1
	//{ ACT_CmdSettingHU2,		 0x0F,{ 0x70, 0x83, 0x00, 0x02, 0x00, 0xA8, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x09, 0x09, 0x00 }, 3 },  	//CmdGetSettingHU2
	//{ ACT_CmdSettingHU3,		 0x03,{ 0x70, 0xC0, 0xD1 }, 2 },  	//CmdGetSettingHU3

	//{ ACT_CmdSettingHU4,		 0x1B,{ 0x60, 0x02, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x15, 0xbb, 0x01, 0x01, 0x01, 0xbb, 0xbb, 0xbb, 0xbb, 0xbb, 0xbb, 0x00, 0xbb, 0xbb, 0x01, 0x03, 0x00 }, 3 },  //CmdGetSettingHU4
	//{ ACT_CmdSettingHU5,		 0x11,{ 0x60, 0x06, 0x00, 0xff, 0x00, 0x03, 0x00, 0x00, 0x02, 0xbb, 0xbb, 0xbb, 0xbb, 0x87, 0x9b, 0x01, 0xff }, 3 },//CmdGetSettingHU5
	//{ ACT_CmdSettingHU6,		 0x0E,{ 0x60, 0x83, 0x00, 0x00, 0x00, 0x00, 0x04, 0x03, 0x03, 0x02, 0x00, 0x00, 0x00, 0x00 }, 3 },  	//CmdGetSettingHU6 ToneBallance
	{ ACT_CmdSettingHU_MODE,		 0x0C,{ 0x60, 0xc0, 0x00, 0x0e, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, 4 },  	//CmdSetMODE
	{ ACT_CmdSettingHU_MODE,		 0x0C,{ 0x60, 0xc0, 0x00, 0x06, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, 4 },

	//{ ACT_CmdSettingHU_CHANGER,		 0x09,{ 0x60, 0x02, 0x02, 0x11, 0x33, 0x33, 0x31, 0xff, 0xff }, 3 },  	//CmdGetSettingHU8
	//
	//{ ACT_CmdSettingHU_FM,		 0x17,{ 0x60, 0x06, 0x02, 0x11, 0x02, 0xbb, 0x87, 0x9b, 0xbb, 0x87, 0x9b, 0xbb, 0x90, 0x1b, 0xbb, 0x98, 0x1b, 0xb1, 0x06, 0x1b, 0xb1, 0x07, 0x9b }, 5 },  	//CmdGetSettingHU9
	//{ ACT_CmdSettingHU_AM,	     0x17,{ 0x60, 0x06, 0x02, 0x11, 0x10, 0xbb, 0x53, 0x0b, 0xbb, 0x60, 0x0b, 0xb1, 0x00, 0x0b, 0xb1, 0x40, 0x0b, 0xb1, 0x62, 0x0b, 0xb1, 0x62, 0x0b }, 5 },  	//CmdGetSettingHU10
	//
	{ ACT_CmdSettingHU_SET_MODE,    0x0C,{ 0x60, 0xc0, 0x00, 0x4F, 0xff, 0x00, 0x00, 0x0b, 0x00, 0x0b, 0x00, 0x00 },  4},  	//Cmd MODE
	{ ACT_CmdSettingHU_SET_MODE,    0x0C,{ 0x60, 0xc0, 0x00, 0x47, 0xff, 0x00, 0x00, 0x0b, 0x00, 0x0b, 0x00, 0x00 },  4 },
	{ ACT_CmdSettingHU_SET_MODE,    0x0C,{ 0x60, 0xc0, 0x00, 0x4E, 0xff, 0x00, 0x00, 0x0b, 0x00, 0x0b, 0x00, 0x00 },  4 },
};

const byte inMesagesIgnorePosINITSize = sizeof(inMesagesIgnorePosINIT) / sizeof(InMessageIgnoreFromPosition);







const OutMessage CmdRegisterReset    PROGMEM = { MSG_BROADCAST,   0x03,{ 0x12, 0x01, 0x01} }; // register  
//const OutMessage CmdDevice   PROGMEM = { MSG_BROADCAST,   0x03,{  0x37, 0x02, 0x01 } }; // register  

const OutMessage CmdRegisterHU      PROGMEM = { MSG_DIRECT,       0x07,{ 0x11, 0, 0x01, 0x03, 0x92, 0x85,0x93 } }; // register  NU 
const OutMessage CmdRegisterSAT     PROGMEM = { MSG_DIRECT,       0x05,{ 0x11, 0, 0x01, 0x01, 0x42} }; // register  SAT

const OutMessage CmdRegisterCDC     PROGMEM = { MSG_DIRECT,       0x05,{ 0x11, 0, 0x00, 0x01, 0x02 } }; // register  CDC

//const OutMessage CmdRegisterCDC     PROGMEM = { MSG_DIRECT,       0x05,{ 0x11, 0, 0x00, 0x01, 0x03 } }; // register  CDC


const OutMessage CmdRegisterSAT1    PROGMEM = { MSG_DIRECT,       0x0A,{ 0x70, 0x42, 0x36, 0x22, 0x28, 0x02, 0x00, 0x04, 0x7F, 0x08 } }; // register  SAT
														//< d 260 130 18 60 42 00 FF 00 00 33 00 00 01 0B 0B B0 01 00 06 00 10 00 00 00 00 00 00 

const OutMessage CmdRegisterSAT2    PROGMEM = { MSG_DIRECT,       0x18,{ 0x60, 0x42, 0x00, 0xff, 0x00, 0x00, 0x33, 0x00, 0x00, 0x01, 0x0B, 0x0B, 0xB0, 0x01, 0x00, 0x06, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 } }; // register  SAT
																			//60 42 02 11 01 B0 01 B0 01 B0 01 B0 01 B0 01 B0 01 
const OutMessage CmdRegisterSAT3    PROGMEM = { MSG_DIRECT,       0x11,{ 0x60, 0x42, 0x02, 0x11, 0x01, 0xB0, 0x01, 0xB0, 0x01, 0xB0, 0x01, 0xB0, 0x01, 0xB0, 0x01, 0xB0, 0x01 } }; // register  SAT


														//< d 260 130 18 60 42 00 00 01 00 33 00 00 01 0B 0B B0 01 00 06 00 10 00 00 10 11 11 00 
														//< d 130 260 1 1F
														//< d 260 130 18 60 42 00 00 01 00 33 00 00 01 0B 0B B0 01 00 06 00 10 00 1E 20 11 11 00
														//< d 260 130 18 60 42 00 00 00 00 33 00 00 01 0B 0B B0 01 00 06 00 10 00 1E 20 11 12 00
														//< d 260 130 18 60 42 00 00 00 00 33 00 00 01 0B 0B B0 01 00 06 00 10 00 1E 20 11 13 00													
														//< d 260 130 18 60 42 00 00 01 00 33 00 00 01 0B 0B B0 01 00 06 00 10 00 1E 40 22 24 00

const OutMessage CmdRegisterSAT4    PROGMEM = { MSG_DIRECT,       0x18,{ 0x60, 0x42, 0x00, 0x00, 0x01, 0x00, 0x33, 0x00, 0x00, 0x01, 0x0B, 0x0B, 0xB0, 0x01, 0x00, 0x06, 0x00, 0x10, 0x00, 0x00, 0x10, 0x11, 0x11, 0x00 } };
const OutMessage CmdRegisterSAT5    PROGMEM = { MSG_DIRECT,       0x18,{ 0x60, 0x42, 0x00, 0x00, 0x01, 0x00, 0x33, 0x00, 0x00, 0x01, 0x0B, 0x0B, 0xB0, 0x01, 0x00, 0x06, 0x00, 0x10, 0x00, 0x1E, 0x20, 0x11, 0x11, 0x00 } }; // register  SAT
const OutMessage CmdRegisterSAT6    PROGMEM = { MSG_DIRECT,       0x18,{ 0x60, 0x42, 0x00, 0x00, 0x00, 0x00, 0x33, 0x00, 0x00, 0x01, 0x0B, 0x0B, 0xB0, 0x01, 0x00, 0x06, 0x00, 0x10, 0x00, 0x1E, 0x20, 0x11, 0x12, 0x00 } };
const OutMessage CmdRegisterSAT7    PROGMEM = { MSG_DIRECT,       0x18,{ 0x60, 0x42, 0x00, 0x00, 0x00, 0x00, 0x33, 0x00, 0x00, 0x01, 0x0B, 0x0B, 0xB0, 0x01, 0x00, 0x06, 0x00, 0x10, 0x00, 0x1E, 0x20, 0x11, 0x13, 0x00} }; // register  SAT
const OutMessage CmdRegisterSAT8    PROGMEM = { MSG_DIRECT,       0x18,{ 0x60, 0x42, 0x00, 0x00, 0x01, 0x00, 0x33, 0x00, 0x00, 0x01, 0x0B, 0x0B, 0xB0, 0x01, 0x00, 0x06, 0x00, 0x10, 0x00, 0x1E, 0x40, 0x22, 0x24, 0x00 } }; // register  SAT



const OutMessage CmdGetSettingHU0     PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0x02, 0x10 } }; // init command Changer INFO
const OutMessage CmdGetSettingHU1     PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0x06, 0x10 } }; // init command Current Station
const OutMessage CmdGetSettingHU2     PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0x83, 0x10 } }; // init command Tone BAL
const OutMessage CmdGetSettingHU3     PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0xC0, 0x10 } }; // init command mode
 
//C 60 c0 00 0e ff 00 00 06 00 06 00 00
//130 FFF 8 50 02 42 42 2C 00 00 00
const OutMessage CmdSwitch     PROGMEM = { MSG_DIRECT,		0x04,{ 0x40, 0xC0, 0x1b,0x1b} }; // init command 1



const OutMessage CmdGetSettingHUCurrentSation		PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0x06, 0x00 } }; // init command Current Station
const OutMessage CmdGetSettingHUSound			    PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0x83, 0x00 } }; // init command Tone BAL
const OutMessage CmdGetSettingHUMode				PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0xC0, 0x00 } }; // init command mode

#if  defined(CDC) || defined(CDCEXT)

const OutMessage CmdGetSettingHU4				 PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0x12, 0x00 } }; // init command Changer INFO
const OutMessage CmdGetSettingGetChangerInfo     PROGMEM = { MSG_DIRECT,		0x04,{ 0x40, 0x12, 0x02, 0x00 } }; //   get changer info
const OutMessage CmdGetSettingGetChangerTable    PROGMEM = { MSG_DIRECT,		0x04,{ 0x40, 0x12, 0x02, 0x02 } }; //   get changer info

//8 45 02 00 01 00 04 00 00
const OutMessage CmdGetMP3FolderInfo	 PROGMEM = { MSG_DIRECT,		0x08,{ 0x45, 0x12, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00 } };
//8 45 02 00 01 01 04 01 00
//8 45 02 00 01 01 04 01 01
const OutMessage CmdGetMP3FileInfo		 PROGMEM = { MSG_DIRECT,		0x08,{ 0x45, 0x12, 0x00, 0x01, 0x01, 0x04, 0x01, 0x00 } };

#else
const OutMessage CmdGetSettingHU4     PROGMEM = { MSG_DIRECT,		0x03,{ 0x40, 0x02, 0x00 } }; // init command Changer INFO

const OutMessage CmdGetSettingGetChangerInfo      PROGMEM = { MSG_DIRECT,		0x04,{ 0x40,  0x02, 0x02, 0x00 } }; //   get changer info
const OutMessage CmdGetSettingGetChangerTable      PROGMEM = { MSG_DIRECT,		0x04,{ 0x40,  0x02, 0x02, 0x02 } }; //   get changer info

																													//8 45 02 00 01 00 04 00 00
const OutMessage CmdGetMP3FolderInfo    PROGMEM = { MSG_DIRECT,		0x08,{ 0x45, 0x02, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00 } };
//8 45 02 00 01 01 04 01 00
//8 45 02 00 01 01 04 01 01
const OutMessage CmdGetMP3FileInfo    PROGMEM = { MSG_DIRECT,		0x08,{ 0x45, 0x02, 0x00, 0x01, 0x01, 0x04, 0x01, 0x00 } };
#endif // CDC



#ifdef USA

const OutMessage CmdGetSettingGetStationsTableFM1   PROGMEM = { MSG_DIRECT,		0x05,{ 0x40,  0x06, 0x02, 0x00, 0x01 } }; //  get stations table FM1
const OutMessage CmdGetSettingGetStationsTableFM2   PROGMEM = { MSG_DIRECT,		0x05,{ 0x40,  0x06, 0x02, 0x00, 0x02 } }; //  get stations table FM2
const OutMessage CmdGetSettingGetStationsTableAM    PROGMEM = { MSG_DIRECT,		0x05,{ 0x40,  0x06, 0x02, 0x00, 0x10 } }; //  get stations table AM

#else 
const OutMessage CmdGetSettingGetStationsTableFM1   PROGMEM = { MSG_DIRECT,		0x05,{ 0x40,  0x07, 0x02, 0x00, 0x01 } }; //  get stations table FM1
const OutMessage CmdGetSettingGetStationsTableFM2   PROGMEM = { MSG_DIRECT,		0x05,{ 0x40,  0x07, 0x02, 0x00, 0x02 } }; //  get stations table FM2
const OutMessage CmdGetSettingGetStationsTableFM3   PROGMEM = { MSG_DIRECT,		0x05,{ 0x40,  0x07, 0x02, 0x00, 0x03 } }; //  get stations table FM2

const OutMessage CmdGetSettingGetStationsTableAM   PROGMEM = { MSG_DIRECT,		0x05,{ 0x40,  0x07, 0x02, 0x00, 0x30 } }; //  get stations table AM

#endif // USA



const OutMessage CmdGetSettingHU11    PROGMEM = { MSG_DIRECT,		0x02,{ 0x13,  0xFF } }; //  

const OutMessage CmdGetSettingHUEnd    PROGMEM = { MSG_DIRECT,		0x04,{ 0xd0,  0x31, 0x0b, 0x00 } }; //   end


//37 92 01 01
const OutMessage CmdMuteOn     PROGMEM = { MSG_DIRECT,		0x04,{ 0x37, 0x92, 0x01,0x01 } }; // init command 1
const OutMessage CmdMuteOff     PROGMEM = { MSG_DIRECT,		0x04,{ 0x37, 0x92, 0x00,0x01 } }; // init command 1

														//5 52 02 42 48 00
//const OutMessage CmdSAT_UP       PROGMEM = { MSG_BROADCAST, 0x05,{ 0x52, 0x02, 0x42, 0x48, 0x00 } };
const OutMessage CmdSAT_UP       PROGMEM = { MSG_BROADCAST, 0x18,{ 0x60, 0x42, 0x00, 0x20, 0x01, 0x00, 0x33, 0x00, 0x00, 0x01, 0x0B, 0x0B, 0xB0, 0x01, 0x00, 0x01, 0x00, 0x10, 0x00, 0x1E, 0x00, 0x66, 0x68, 0x00} };
const OutMessage CmdSAT_DOWN     PROGMEM = { MSG_BROADCAST, 0x05,{ 0x52, 0x02, 0x42, 0x32, 0x00 } };


typedef struct
{
	IncomeActionID	setting;
	bool            inited;
	OutMessage     command;
} InitRow;

